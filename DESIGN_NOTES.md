# ペンデュラムダウジング デザインドキュメント

## 概要
加速度センサーを使用したインタラクティブなペンデュラムダウジングのWebアプリケーション。デバイスの動きに応じて振り子が揺れ、ダウジングチャートの答えを指し示します。

## デザインのポイント

### 1. 視覚的な構造

#### ペンデュラムの構成要素
- **固定点（アンカー）**: 上部に配置された固定点。グレーのグラデーションで金属的な質感を表現
- **チェーン**: 細い1pxのラインで繊細さを演出。グラデーションで立体感を付与
- **振り子（ウェイト）**: アメジスト風の紫色グラデーション。神秘的な雰囲気を演出

#### 3D表現
- `perspective: 800px`で奥行き感を演出
- チャートは60度の角度で傾けて表示（`rotateX(60deg)`）
- 斜め上から見下ろす視点で、ユーザーが実際にペンデュラムを使っているような体験を提供

### 2. 物理的な動作

#### 振り子の物理シミュレーション
```javascript
// チェーンの根元を支点として回転
pendulumChain.style.transform = `rotateX(${finalSwingY}deg) rotateZ(${finalSwingX}deg)`;
```
- 加速度センサーの値を角度に変換
- 感度調整により反応の強さをカスタマイズ可能（0.5倍〜25倍）
- 変化量に応じた増幅効果で、動きの大きさに応じてより大きく振れる

#### 影の追従
- 振り子の位置に基づいて影の位置を三角関数で計算
- 振れ幅に応じて影のスケールも変化し、リアリティを向上

### 3. インタラクティブな要素

#### ダウジングチャート
- 5つのセグメント: YES, NO, MAYBE, LATER, UNKNOWN
- 振り子が指している方向のセグメントがハイライト表示
- ハイライト時はテキストが拡大し、色が変化

#### 視覚的フィードバック
- 探知レベルメーター: 動きの大きさを視覚化
- ステータス表示: 現在指している答えをテキストで表示
- パルスアニメーション: アクティブな要素を強調

### 4. カラーパレット

- **メインカラー**: `#667eea`（紫青）- モダンで神秘的な印象
- **振り子**: `#9b59b6`〜`#5b2c6f`（紫のグラデーション）
- **背景**: 白〜薄い青紫のグラデーション
- **アクセント**: 探知レベルに応じて緑→オレンジ→赤へ変化

### 5. アニメーションとトランジション

#### スムーズな動き
- 振り子の動き: `transition: transform 0.15s ease-out`
- 適度な遅延で自然な慣性を表現
- 影の動きも同期させることで一体感を演出

#### 装飾的アニメーション
- 振り子のきらめき効果（`@keyframes sparkle`）
- セグメントのパルス効果（`@keyframes segmentPulse`）
- 探知フィールドの波紋効果

### 6. レスポンシブデザイン

- 最大幅500pxのコンテナで、モバイルデバイスに最適化
- タッチ操作に配慮したボタンサイズ（最小44px）
- ビューポート設定で拡大縮小を制限し、安定した表示を維持

### 7. ユーザビリティ

#### 感度調整
- スライダーで0.5倍〜25倍まで調整可能
- リアルタイムで値を表示
- 初心者から上級者まで対応

#### デバッグモード
- 開発者向けの詳細情報表示
- 加速度センサーの生データを確認可能

## 技術的な実装の特徴

1. **CSS3の活用**
   - `transform-style: preserve-3d`で3D空間を構築
   - 複数のグラデーションとbox-shadowで質感を表現
   - CSS変数は使用せず、直接値を指定して互換性を確保

2. **パフォーマンス最適化**
   - 100msごとの更新で滑らかさとパフォーマンスのバランスを取る
   - CSSトランジションで補間し、なめらかな動きを実現

3. **クロスプラットフォーム対応**
   - iOS 13+の権限リクエストに対応
   - Androidでも動作確認済み
   - HTTPSでの配信が必須（センサーAPI使用のため）

## 今後の拡張可能性

- 複数のチャートパターン（数字、アルファベットなど）
- 振り子のカスタマイズ（色、形状）
- 履歴記録機能
- サウンドエフェクトの追加
- ARモードの実装
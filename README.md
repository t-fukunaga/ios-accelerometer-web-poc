# 📱 デバイス傾きセンサー Web PoC

iOSデバイスの加速度センサーを使って、傾きを視覚的に表示するWebアプリケーションです。

## ✨ 特徴

- 🎨 3Dデバイス表示 - デバイスの傾きをリアルタイムで視覚化
- 💧 水平器風バブル - 傾きの方向を直感的に表示
- 📊 プログレスバー - 各軸の値を色分けして表示
- 🔧 デバッグ機能 - 必要に応じてログを表示
- 📱 iOS Safari 13以降対応

## 🚀 使い方

### ngrokを使った起動（推奨）

```bash
# HTTPサーバーを起動
npm run dev

# 別のターミナルでngrok起動
ngrok http 8080
```

### 直接HTTPサーバー起動

```bash
npm run dev
```

## 📱 iPhoneでの動作確認

1. ngrokのHTTPS URLにiPhoneのSafariでアクセス
2. 「センサーを開始」ボタンをタップ
3. 権限要求ダイアログが表示されたら「許可」をタップ
4. デバイスを傾けると以下が連動して動きます：
   - 📱 3Dスマホアイコンが回転
   - 💧 バブルが傾きの方向に移動
   - 📊 プログレスバーが変化

## 🎯 表示内容

### 視覚的な表示
- **3Dデバイス** - スマホアイコンがデバイスの傾きに合わせて回転
- **傾きバブル** - 水平器のように傾きの方向を示すバブル

### 数値表示
- **X軸（赤）** - 左右の傾き
- **Y軸（緑）** - 前後の傾き  
- **Z軸（青）** - 上下の動き

### デバッグ機能
- 右上の🔧ボタンでデバッグログの表示/非表示を切り替え
- 環境情報、権限状況、エラー情報を確認可能

## ⚠️ トラブルシューティング

### センサーが反応しない場合

1. **HTTPS接続を確認**
   - ngrokは自動的にHTTPS化されます
   - iOS 13以降はHTTPS接続が必須

2. **権限設定を確認**
   - 設定 > Safari > プライバシーとセキュリティ > モーションとオリエンテーションのアクセス

3. **デバイスを動かす**
   - 静止状態では変化が見えにくい場合があります

4. **デバッグログを確認**
   - 🔧ボタンでログを表示してエラーを確認

## 🛠 技術的な詳細

- **フレームワーク**: なし（バニラJavaScript）
- **センサーAPI**: `DeviceMotionEvent`
- **権限管理**: `DeviceMotionEvent.requestPermission()` (iOS 13+)
- **更新頻度**: 100ms
- **対応ブラウザ**: iOS Safari 13以降

## 📋 必要な環境

- iOS Safari 13以降
- HTTPS接続（ngrok経由推奨）
- Node.js（開発用サーバー起動のため）